#include <cstdio>

char b[4][4];

int main()
{
  int t;
  scanf("%d", &t);

  for (int i = 1; i <= t; ++i)
  {
    printf("Case #%d: ", i);

    for (int y = 0; y < 4; ++y)
      for (int x = 0; x < 4; ++x)
        scanf(" %c", &b[y][x]);

    char w = -1;

    // Row
    for (int j = 0; j < 4 && w < 0; ++j)
    {
      if ((b[j][0] == 'O' || b[j][0] == 'T') &&
          (b[j][1] == 'O' || b[j][1] == 'T') &&
          (b[j][2] == 'O' || b[j][2] == 'T') &&
          (b[j][3] == 'O' || b[j][3] == 'T'))
        w = 'O';

      if ((b[j][0] == 'X' || b[j][0] == 'T') &&
          (b[j][1] == 'X' || b[j][1] == 'T') &&
          (b[j][2] == 'X' || b[j][2] == 'T') &&
          (b[j][3] == 'X' || b[j][3] == 'T'))
        w = 'X';
    }

    // Col
    for (int j = 0; j < 4 && w < 0; ++j)
    {
      if ((b[0][j] == 'O' || b[0][j] == 'T') &&
          (b[1][j] == 'O' || b[1][j] == 'T') &&
          (b[2][j] == 'O' || b[2][j] == 'T') &&
          (b[3][j] == 'O' || b[3][j] == 'T'))
        w = 'O';

      if ((b[0][j] == 'X' || b[0][j] == 'T') &&
          (b[1][j] == 'X' || b[1][j] == 'T') &&
          (b[2][j] == 'X' || b[2][j] == 'T') &&
          (b[3][j] == 'X' || b[3][j] == 'T'))
        w = 'X';
    }

    // Diagonal
    if (w < 0 &&
        (b[0][0] == 'O' || b[0][0] == 'T') &&
        (b[1][1] == 'O' || b[1][1] == 'T') &&
        (b[2][2] == 'O' || b[2][2] == 'T') &&
        (b[3][3] == 'O' || b[3][3] == 'T'))
      w = 'O';

    if (w < 0 &&
        (b[0][3] == 'O' || b[0][3] == 'T') &&
        (b[1][2] == 'O' || b[1][2] == 'T') &&
        (b[2][1] == 'O' || b[2][1] == 'T') &&
        (b[3][0] == 'O' || b[3][0] == 'T'))
      w = 'O';

    if (w < 0 &&
        (b[0][0] == 'X' || b[0][0] == 'T') &&
        (b[1][1] == 'X' || b[1][1] == 'T') &&
        (b[2][2] == 'X' || b[2][2] == 'T') &&
        (b[3][3] == 'X' || b[3][3] == 'T'))
      w = 'X';

    if (w < 0 &&
        (b[0][3] == 'X' || b[0][3] == 'T') &&
        (b[1][2] == 'X' || b[1][2] == 'T') &&
        (b[2][1] == 'X' || b[2][1] == 'T') &&
        (b[3][0] == 'X' || b[3][0] == 'T'))
      w = 'X';

    // Not completed
    for (int y = 0; y < 4 && w < 0; ++y)
      for (int x = 0; x < 4 && w < 0; ++x)
        if (b[y][x] == '.')
          w = 0;

    if (w > 0)
      printf("%c won\n", w);
    else if (w == 0)
      printf("Game has not completed\n");
    else
      printf("Draw\n");
  }

  return 0;
}
